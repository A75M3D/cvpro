<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVPro - المنصة الاحترافية للبروفايل</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'rgb(var(--color-primary) / <alpha-value>)',
                        'primary-dark': 'rgb(var(--color-primary-dark) / <alpha-value>)',
                        'primary-light': 'rgb(var(--color-primary-light) / <alpha-value>)',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --color-primary: 59 130 246;
            --color-primary-dark: 37 99 235;
            --color-primary-light: 147 197 253;
        }
        
        [data-theme="blue"] { 
            --color-primary: 59 130 246;
            --color-primary-dark: 37 99 235;
            --color-primary-light: 147 197 253;
        }
        [data-theme="green"] { 
            --color-primary: 34 197 94;
            --color-primary-dark: 22 163 74;
            --color-primary-light: 134 239 172;
        }
        [data-theme="purple"] { 
            --color-primary: 168 85 247;
            --color-primary-dark: 147 51 234;
            --color-primary-light: 216 180 254;
        }
        [data-theme="red"] { 
            --color-primary: 239 68 68;
            --color-primary-dark: 220 38 38;
            --color-primary-light: 252 165 165;
        }
        [data-theme="orange"] { 
            --color-primary: 249 115 22;
            --color-primary-dark: 234 88 12;
            --color-primary-light: 253 186 116;
        }
        [data-theme="teal"] { 
            --color-primary: 20 184 166;
            --color-primary-dark: 15 118 110;
            --color-primary-light: 94 234 212;
        }
        [data-theme="indigo"] { 
            --color-primary: 99 102 241;
            --color-primary-dark: 79 70 229;
            --color-primary-light: 165 180 252;
        }
        [data-theme="pink"] { 
            --color-primary: 236 72 153;
            --color-primary-dark: 219 39 119;
            --color-primary-light: 249 168 212;
        }
        [data-theme="yellow"] { 
            --color-primary: 234 179 8;
            --color-primary-dark: 202 138 4;
            --color-primary-light: 254 240 138;
        }
        [data-theme="cyan"] { 
            --color-primary: 6 182 212;
            --color-primary-dark: 8 145 178;
            --color-primary-light: 103 232 249;
        }
        
        .theme-transition {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hidden {
            display: none !important;
        }
        
        .sidebar-item.active {
            background: linear-gradient(135deg, rgb(var(--color-primary) / 0.15) 0%, rgb(var(--color-primary) / 0.05) 100%);
            color: rgb(var(--color-primary));
            border-right: 3px solid rgb(var(--color-primary));
            box-shadow: 0 4px 12px rgb(var(--color-primary) / 0.1);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dark .glass-effect {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .shadow-glow {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .shadow-glow-primary {
            box-shadow: 0 8px 32px rgb(var(--color-primary) / 0.15);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .animate-slideIn {
            animation: slideIn 0.5s ease-out;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, rgb(var(--color-primary) / 0.08) 0%, rgb(var(--color-primary) / 0.03) 50%, transparent 100%);
        }
        
        .neon-border {
            border: 1px solid rgb(var(--color-primary) / 0.3);
            box-shadow: 0 0 10px rgb(var(--color-primary) / 0.2), inset 0 0 10px rgb(var(--color-primary) / 0.1);
        }
        
        .neon-glow {
            box-shadow: 0 0 15px rgb(var(--color-primary) / 0.3), 0 0 30px rgb(var(--color-primary) / 0.2);
        }
        
        .dark .neon-border {
            border: 1px solid rgb(var(--color-primary) / 0.5);
            box-shadow: 0 0 15px rgb(var(--color-primary) / 0.4), inset 0 0 15px rgb(var(--color-primary) / 0.2);
        }
        
        .dark .neon-glow {
            box-shadow: 0 0 20px rgb(var(--color-primary) / 0.5), 0 0 40px rgb(var(--color-primary) / 0.3);
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .dark .hover-lift:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, rgb(var(--color-primary)) 0%, rgb(var(--color-primary-dark)) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .bg-gradient-primary {
            background: linear-gradient(135deg, rgb(var(--color-primary)) 0%, rgb(var(--color-primary-dark)) 100%);
        }
        
        .bg-gradient-light {
            background: linear-gradient(135deg, rgb(var(--color-primary-light)) 0%, rgb(var(--color-primary)) 50%, rgb(var(--color-primary-dark)) 100%);
        }
        
        .sidebar-glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .sidebar-glass {
            background: rgba(0, 0, 0, 0.3);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .header-glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .header-glass {
            background: rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-glass {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .card-glass {
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-950 dark:to-gray-900 theme-transition" data-theme="blue">
    <!-- الهيكل الرئيسي -->
    <div class="flex h-screen overflow-hidden">
        <!-- الشريط الجانبي -->
        <div id="sidebar" class="w-80 sidebar-glass theme-transition flex flex-col transform transition-all duration-500 z-30 fixed lg:relative lg:translate-x-0 h-full" style="transform: translateX(-100%);">
            <!-- اللوجو وزر الإغلاق -->
            <div class="p-6 border-b border-gray-200/30 dark:border-gray-700/30 flex items-center justify-between">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="w-12 h-12 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                        <i class="fas fa-user-tie text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800 dark:text-white">CVPro</h1>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">منصة البروفايل الاحترافية</p>
                    </div>
                </div>
                <button id="close-sidebar" class="p-2 rounded-xl hover:bg-gray-200/50 dark:hover:bg-gray-700/50 text-gray-500 dark:text-gray-400 lg:hidden">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>

            <!-- الملف الشخصي المصغر -->
            <div class="p-6 border-b border-gray-200/30 dark:border-gray-700/30">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="relative">
                        <div class="w-16 h-16 bg-gradient-primary rounded-2xl overflow-hidden border-4 border-white/70 dark:border-gray-800/70 shadow-glow">
                            <img id="sidebar-user-image" src="" alt="" class="w-full h-full object-cover hidden">
                            <div class="w-full h-full flex items-center justify-center text-white">
                                <i class="fas fa-user text-xl"></i>
                            </div>
                        </div>
                        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white/70 dark:border-gray-800/70 shadow-glow"></div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p id="sidebar-user-name" class="text-lg font-semibold text-gray-800 dark:text-white truncate">أحمد محمد</p>
                        <p id="sidebar-user-role" class="text-sm text-gray-500 dark:text-gray-400 truncate">مهندس برمجيات</p>
                        <div class="flex items-center mt-1">
                            <div class="flex text-yellow-400 text-xs">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-xs text-gray-500 dark:text-gray-400 mr-1">4.7</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القائمة الرئيسية -->
            <nav class="flex-1 p-6 space-y-2 overflow-y-auto">
                <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition active group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-home text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">لوحة التحكم</span>
                    <span class="en-text hidden font-medium">Dashboard</span>
                </a>
                
                <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-certificate text-white text-sm"></i>
                    </div>
                    <div class="flex-1 flex items-center justify-between">
                        <span class="ar-text font-medium">الشهادات</span>
                        <span class="en-text hidden font-medium">Certificates</span>
                        <span class="bg-primary text-white text-xs px-2 py-1 rounded-full shadow-glow">3/10</span>
                    </div>
                </a>
                
                <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-briefcase text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">الخبرات</span>
                    <span class="en-text hidden font-medium">Experiences</span>
                </a>
                
                <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-project-diagram text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">المشاريع</span>
                    <span class="en-text hidden font-medium">Projects</span>
                </a>
                
                <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-chart-bar text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">الإحصائيات</span>
                    <span class="en-text hidden font-medium">Analytics</span>
                </a>

                <!-- قسم الأدمن (يظهر فقط للأدمن) -->
                <div id="admin-section" class="pt-6 mt-6 border-t border-gray-200/30 dark:border-gray-700/30 hidden">
                    <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-4 px-2 tracking-wider">
                        <span class="ar-text">إدارة النظام</span>
                        <span class="en-text hidden">Admin</span>
                    </p>
                    
                    <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                        <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                            <i class="fas fa-user-shield text-white text-sm"></i>
                        </div>
                        <div class="flex-1 flex items-center justify-between">
                            <span class="ar-text font-medium">لوحة الأدمن</span>
                            <span class="en-text hidden font-medium">Admin Panel</span>
                            <span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full shadow-glow">5</span>
                        </div>
                    </a>
                    
                    <a href="#" class="sidebar-item flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                        <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                            <i class="fas fa-users text-white text-sm"></i>
                        </div>
                        <span class="ar-text font-medium">إدارة المستخدمين</span>
                        <span class="en-text hidden font-medium">Users Management</span>
                    </a>
                </div>
            </nav>

            <!-- الإعدادات السريعة -->
            <div class="p-6 border-t border-gray-200/30 dark:border-gray-700/30">
                <div class="space-y-3">
                    <button id="theme-toggle-sidebar" class="flex items-center space-x-4 space-x-reverse p-3 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition w-full text-right group hover-lift">
                        <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                            <i class="fas fa-moon text-white text-sm"></i>
                        </div>
                        <span class="ar-text font-medium">الوضع الداكن</span>
                        <span class="en-text hidden font-medium">Dark Mode</span>
                    </button>
                    
                    <button id="language-toggle-sidebar" class="flex items-center space-x-4 space-x-reverse p-3 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition w-full text-right group hover-lift">
                        <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                            <i class="fas fa-globe text-white text-sm"></i>
                        </div>
                        <span class="ar-text font-medium">English</span>
                        <span class="en-text hidden font-medium">العربية</span>
                    </button>
                    
                    <button id="settings-btn-sidebar" class="flex items-center space-x-4 space-x-reverse p-3 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition w-full text-right group hover-lift">
                        <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                            <i class="fas fa-cog text-white text-sm"></i>
                        </div>
                        <span class="ar-text font-medium">الإعدادات</span>
                        <span class="en-text hidden font-medium">Settings</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- المحتوى الرئيسي -->
        <div class="flex-1 flex flex-col overflow-hidden lg:ml-0">
            <!-- الشريط العلوي -->
            <header class="header-glass shadow-sm theme-transition z-20">
                <div class="flex items-center justify-between px-6 py-4">
                    <!-- زر القائمة للجوال -->
                    <button id="mobile-menu-btn" class="p-3 rounded-2xl hover:bg-gray-200/30 dark:hover:bg-gray-700/30 text-gray-600 dark:text-gray-300 theme-transition lg:hidden neon-border">
                        <i class="fas fa-bars text-xl"></i>
                    </button>

                    <!-- العنوان والمسار -->
                    <div class="flex-1 flex items-center space-x-4 space-x-reverse mr-4">
                        <h1 class="text-2xl font-bold text-gray-800 dark:text-white hidden md:block">
                            <span class="ar-text">لوحة التحكم</span>
                            <span class="en-text hidden">Dashboard</span>
                        </h1>
                        <div class="hidden md:flex items-center space-x-2 space-x-reverse text-sm text-gray-500 dark:text-gray-400">
                            <span>CVPro</span>
                            <i class="fas fa-chevron-left text-xs"></i>
                            <span class="text-primary font-medium">
                                <span class="ar-text">الرئيسية</span>
                                <span class="en-text hidden">Home</span>
                            </span>
                        </div>
                    </div>

                    <!-- الأزرار العلوية -->
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <!-- زر الإشعارات -->
                        <div class="relative">
                            <button class="p-3 rounded-2xl hover:bg-gray-200/30 dark:hover:bg-gray-700/30 text-gray-600 dark:text-gray-300 theme-transition relative neon-border">
                                <i class="fas fa-bell text-xl"></i>
                            </button>
                            <span class="absolute -top-1 -left-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center shadow-glow animate-pulse">3</span>
                        </div>

                        <!-- زر الرسائل -->
                        <div class="relative">
                            <button class="p-3 rounded-2xl hover:bg-gray-200/30 dark:hover:bg-gray-700/30 text-gray-600 dark:text-gray-300 theme-transition neon-border">
                                <i class="fas fa-envelope text-xl"></i>
                            </button>
                            <span class="absolute -top-1 -left-1 bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center shadow-glow">5</span>
                        </div>

                        <!-- زر الإعدادات السريعة -->
                        <button id="quick-settings-btn" class="p-3 rounded-2xl hover:bg-gray-200/30 dark:hover:bg-gray-700/30 text-gray-600 dark:text-gray-300 theme-transition neon-border">
                            <i class="fas fa-cog text-xl"></i>
                        </button>

                        <!-- قائمة المستخدم -->
                        <div class="relative">
                            <button id="user-menu-btn" class="flex items-center space-x-3 space-x-reverse bg-gray-100/30 dark:bg-gray-700/30 rounded-2xl pl-3 pr-4 py-2 hover:bg-gray-200/30 dark:hover:bg-gray-600/30 theme-transition neon-border">
                                <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center text-white text-sm shadow-glow-primary">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="text-right hidden md:block">
                                    <p class="text-sm font-semibold text-gray-800 dark:text-white">أحمد محمد</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">مستخدم محترف</p>
                                </div>
                                <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
                            </button>

                            <!-- القائمة المنسدلة -->
                            <div id="user-dropdown" class="absolute left-0 mt-2 w-56 bg-white/90 dark:bg-gray-800/90 glass-effect rounded-2xl shadow-xl py-2 z-10 hidden border border-gray-200/30 dark:border-gray-700/30 theme-transition animate-fadeIn backdrop-blur-lg">
                                <a href="#" class="flex items-center space-x-3 space-x-reverse px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition rounded-lg mx-2">
                                    <i class="fas fa-user w-4 text-primary"></i>
                                    <span class="ar-text font-medium">الملف الشخصي</span>
                                    <span class="en-text hidden font-medium">Profile</span>
                                </a>
                                <a href="#" class="flex items-center space-x-3 space-x-reverse px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition rounded-lg mx-2">
                                    <i class="fas fa-cog w-4 text-primary"></i>
                                    <span class="ar-text font-medium">الإعدادات</span>
                                    <span class="en-text hidden font-medium">Settings</span>
                                </a>
                                <a href="#" id="admin-panel-btn" class="flex items-center space-x-3 space-x-reverse px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition rounded-lg mx-2 hidden">
                                    <i class="fas fa-user-shield w-4 text-primary"></i>
                                    <span class="ar-text font-medium">لوحة الأدمن</span>
                                    <span class="en-text hidden font-medium">Admin Panel</span>
                                </a>
                                <div class="border-t border-gray-200/30 dark:border-gray-700/30 my-2"></div>
                                <a href="#" class="flex items-center space-x-3 space-x-reverse px-4 py-3 text-red-600 hover:bg-red-50/30 dark:hover:bg-red-900/30 theme-transition rounded-lg mx-2">
                                    <i class="fas fa-sign-out-alt w-4"></i>
                                    <span class="ar-text font-medium">تسجيل الخروج</span>
                                    <span class="en-text hidden font-medium">Logout</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- المحتوى الديناميكي -->
            <main class="flex-1 overflow-y-auto p-6 gradient-bg">
                <!-- محتوى لوحة التحكم -->
                <div id="dashboard-content" class="animate-fadeIn">
                    <!-- الترحيب والإحصائيات -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                            <span class="ar-text">مرحباً بعودتك، أحمد! 👋</span>
                            <span class="en-text hidden">Welcome back, Ahmed! 👋</span>
                        </h1>
                        <p class="text-gray-600 dark:text-gray-400 text-lg">
                            <span class="ar-text">هذه نظرة عامة على بروفايلك وإحصائياته</span>
                            <span class="en-text hidden">Here's an overview of your profile and statistics</span>
                        </p>
                    </div>

                    <!-- بطاقات الإحصائيات -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="card-glass rounded-2xl p-6 shadow-glow theme-transition hover-lift">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-1">
                                        <span class="ar-text">إجمالي الشهادات</span>
                                        <span class="en-text hidden">Total Certificates</span>
                                    </p>
                                    <p class="text-2xl font-bold text-gray-800 dark:text-white">8/10</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-glow">
                                    <i class="fas fa-certificate text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                                <p class="text-blue-600 text-xs mt-2">
                                    <span class="ar-text">2 شهادات متبقية</span>
                                    <span class="en-text hidden">2 certificates remaining</span>
                                </p>
                            </div>
                        </div>

                        <div class="card-glass rounded-2xl p-6 shadow-glow theme-transition hover-lift">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-1">
                                        <span class="ar-text">المشاهدات</span>
                                        <span class="en-text hidden">Profile Views</span>
                                    </p>
                                    <p class="text-2xl font-bold text-gray-800 dark:text-white">1,247</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-glow">
                                    <i class="fas fa-eye text-white text-xl"></i>
                                </div>
                            </div>
                            <p class="text-green-600 text-sm mt-4 flex items-center">
                                <i class="fas fa-arrow-up ml-1"></i>
                                <span class="ar-text">12% زيادة هذا الشهر</span>
                                <span class="en-text hidden">12% increase this month</span>
                            </p>
                        </div>

                        <div class="card-glass rounded-2xl p-6 shadow-glow theme-transition hover-lift">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-1">
                                        <span class="ar-text">التقييم</span>
                                        <span class="en-text hidden">Rating</span>
                                    </p>
                                    <p class="text-2xl font-bold text-gray-800 dark:text-white">4.8/5</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl flex items-center justify-center shadow-glow">
                                    <i class="fas fa-star text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="flex mt-4">
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star-half-alt text-yellow-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- الأقسام الرئيسية -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- الشهادات الحديثة -->
                        <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                                    <span class="ar-text">أحدث الشهادات</span>
                                    <span class="en-text hidden">Recent Certificates</span>
                                </h2>
                                <a href="#" class="text-primary hover:underline text-sm font-medium flex items-center">
                                    <span class="ar-text">عرض الكل</span>
                                    <span class="en-text hidden">View All</span>
                                    <i class="fas fa-arrow-left mr-1 text-xs"></i>
                                </a>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center space-x-4 space-x-reverse p-4 rounded-2xl hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition border border-gray-200/30 dark:border-gray-700/30 hover-lift">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                                        <i class="fas fa-certificate text-white"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-semibold text-gray-800 dark:text-white">شهادة تطوير الويب</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">منصة إدراك - 15 مارس 2023</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-medium shadow-glow">
                                        <span class="ar-text">مقبولة</span>
                                        <span class="en-text hidden">Approved</span>
                                    </span>
                                </div>

                                <div class="flex items-center space-x-4 space-x-reverse p-4 rounded-2xl hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition border border-gray-200/30 dark:border-gray-700/30 hover-lift">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                                        <i class="fas fa-certificate text-white"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-semibold text-gray-800 dark:text-white">شهادة React المتقدمة</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Udemy - 10 فبراير 2023</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs px-3 py-1 rounded-full font-medium shadow-glow">
                                        <span class="ar-text">قيد المراجعة</span>
                                        <span class="en-text hidden">Pending</span>
                                    </span>
                                </div>

                                <div class="flex items-center space-x-4 space-x-reverse p-4 rounded-2xl hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition border border-gray-200/30 dark:border-gray-700/30 hover-lift">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                                        <i class="fas fa-certificate text-white"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-semibold text-gray-800 dark:text-white">شهادة إدارة المشاريع</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Coursera - 5 يناير 2023</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-medium shadow-glow">
                                        <span class="ar-text">مقبولة</span>
                                        <span class="en-text hidden">Approved</span>
                                    </span>
                                </div>
                            </div>

                            <button class="w-full mt-6 bg-gradient-primary text-white hover:shadow-glow-primary py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                                <i class="fas fa-plus"></i>
                                <span class="ar-text">إضافة شهادة جديدة</span>
                                <span class="en-text hidden">Add New Certificate</span>
                            </button>
                        </div>

                        <!-- الإجراءات السريعة -->
                        <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition">
                            <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-6">
                                <span class="ar-text">الإجراءات السريعة</span>
                                <span class="en-text hidden">Quick Actions</span>
                            </h2>

                            <div class="grid grid-cols-2 gap-4">
                                <a href="#" class="p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-eye text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">معاينة البروفايل</span>
                                        <span class="en-text hidden">Preview Profile</span>
                                    </span>
                                </a>

                                <a href="#" class="p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-share-alt text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">مشاركة</span>
                                        <span class="en-text hidden">Share</span>
                                    </span>
                                </a>

                                <a href="#" class="p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-download text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">تحميل CV</span>
                                        <span class="en-text hidden">Download CV</span>
                                    </span>
                                </a>

                                <a href="#" class="p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-qrcode text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">QR Code</span>
                                        <span class="en-text hidden">QR Code</span>
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- نافذة الإعدادات السريعة -->
    <div id="quick-settings-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden theme-transition backdrop-blur-sm">
        <div class="bg-white/90 dark:bg-gray-800/90 glass-effect rounded-3xl shadow-2xl w-full max-w-md mx-4 theme-transition animate-fadeIn border border-gray-200/30 dark:border-gray-700/30">
            <div class="p-6 border-b border-gray-200/30 dark:border-gray-700/30">
                <h3 class="text-xl font-bold text-gray-800 dark:text-white flex items-center">
                    <i class="fas fa-cog text-primary ml-2"></i>
                    <span class="ar-text">الإعدادات السريعة</span>
                    <span class="en-text hidden">Quick Settings</span>
                </h3>
            </div>
            
            <div class="p-6">
                <!-- تغيير الثيم -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                        <i class="fas fa-palette text-primary ml-2"></i>
                        <span class="ar-text">لون السمة</span>
                        <span class="en-text hidden">Theme Color</span>
                    </h4>
                    <div class="grid grid-cols-5 gap-3">
                        <div class="w-12 h-12 bg-blue-500 rounded-2xl cursor-pointer border-4 border-blue-500 theme-option shadow-glow neon-glow" data-theme="blue" title="أزرق"></div>
                        <div class="w-12 h-12 bg-green-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="green" title="أخضر"></div>
                        <div class="w-12 h-12 bg-purple-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="purple" title="بنفسجي"></div>
                        <div class="w-12 h-12 bg-red-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="red" title="أحمر"></div>
                        <div class="w-12 h-12 bg-orange-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="orange" title="برتقالي"></div>
                        <div class="w-12 h-12 bg-teal-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="teal" title="تركواز"></div>
                        <div class="w-12 h-12 bg-indigo-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="indigo" title="نيلي"></div>
                        <div class="w-12 h-12 bg-pink-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="pink" title="وردي"></div>
                        <div class="w-12 h-12 bg-yellow-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="yellow" title="أصفر"></div>
                        <div class="w-12 h-12 bg-cyan-500 rounded-2xl cursor-pointer border-4 border-transparent theme-option shadow-glow hover:scale-110 transition-transform neon-border" data-theme="cyan" title="سماوي"></div>
                    </div>
                </div>
                
                <!-- تغيير اللغة -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                        <i class="fas fa-globe text-primary ml-2"></i>
                        <span class="ar-text">اللغة</span>
                        <span class="en-text hidden">Language</span>
                    </h4>
                    
                    <div class="flex space-x-4 space-x-reverse">
                        <button class="language-option flex-1 py-4 border-2 border-primary text-primary rounded-2xl font-semibold bg-primary bg-opacity-5 hover:bg-opacity-10 transition-all neon-border" data-lang="ar">
                            <span class="ar-text text-lg">العربية</span>
                            <span class="en-text hidden text-lg">Arabic</span>
                        </button>
                        <button class="language-option flex-1 py-4 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-2xl font-semibold hover:border-primary hover:text-primary transition-all neon-border" data-lang="en">
                            <span class="ar-text text-lg">English</span>
                            <span class="en-text hidden text-lg">English</span>
                        </button>
                    </div>
                </div>
                
                <!-- الوضع الداكن -->
                <div class="flex items-center justify-between p-4 bg-gray-100/30 dark:bg-gray-700/30 rounded-2xl neon-border">
                    <span class="text-gray-700 dark:text-gray-300 font-medium flex items-center">
                        <i class="fas fa-moon text-primary ml-2"></i>
                        <span class="ar-text">الوضع الداكن</span>
                        <span class="en-text hidden">Dark Mode</span>
                    </span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="dark-mode-toggle-modal" class="sr-only peer">
                        <div class="w-12 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-primary shadow-glow"></div>
                    </label>
                </div>
            </div>
            
            <div class="flex justify-end p-6 border-t border-gray-200/30 dark:border-gray-700/30">
                <button id="close-quick-settings" class="bg-gradient-primary text-white px-8 py-3 rounded-2xl hover:shadow-glow-primary transition-all duration-300 font-medium hover-lift">
                    <span class="ar-text">حفظ الإعدادات</span>
                    <span class="en-text hidden">Save Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- بيانات افتراضية للعرض -->
    <script>
        // بيانات المستخدم الافتراضية
        const userData = {
            id: 1,
            name: "أحمد محمد",
            email: "ahmed@example.com",
            role: "مهندس برمجيات",
            isAdmin: true,
            profileImage: "",
            theme: "blue",
            language: "ar",
            darkMode: false
        };

        // بيانات الشهادات الافتراضية
        const certificatesData = [
            {
                id: 1,
                title: "شهادة تطوير الويب",
                issuer: "منصة إدراك",
                date: "2023-03-15",
                status: "approved",
                skills: ["HTML", "CSS", "JavaScript"],
                description: "شهادة في تطوير الويب تشمل HTML, CSS, JavaScript"
            },
            {
                id: 2,
                title: "شهادة React المتقدمة",
                issuer: "Udemy",
                date: "2023-02-10",
                status: "pending",
                skills: ["React", "Redux", "Hooks"],
                description: "شهادة متقدمة في React وتطبيقاتها"
            },
            {
                id: 3,
                title: "شهادة إدارة المشاريع",
                issuer: "Coursera",
                date: "2023-01-05",
                status: "approved",
                skills: ["إدارة المشاريع", "التخطيط", "الميزانية"],
                description: "شهادة في إدارة المشاريع الاحترافية"
            }
        ];

        // بيانات الإحصائيات الافتراضية
        const statsData = {
            totalCertificates: 8,
            maxCertificates: 10,
            profileViews: 1247,
            rating: 4.8
        };
    </script>

    <script>
        // عناصر DOM
        const sidebar = document.getElementById('sidebar');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeSidebarBtn = document.getElementById('close-sidebar');
        const themeToggleSidebar = document.getElementById('theme-toggle-sidebar');
        const languageToggleSidebar = document.getElementById('language-toggle-sidebar');
        const quickSettingsBtn = document.getElementById('quick-settings-btn');
        const quickSettingsModal = document.getElementById('quick-settings-modal');
        const closeQuickSettings = document.getElementById('close-quick-settings');
        const userMenuBtn = document.getElementById('user-menu-btn');
        const userDropdown = document.getElementById('user-dropdown');
        const adminPanelBtn = document.getElementById('admin-panel-btn');
        const adminSection = document.getElementById('admin-section');
        const themeOptions = document.querySelectorAll('.theme-option');
        const languageOptions = document.querySelectorAll('.language-option');
        const darkModeToggleModal = document.getElementById('dark-mode-toggle-modal');
        const sidebarItems = document.querySelectorAll('.sidebar-item');

        // تهيئة Supabase (استبدل بالمفاتيح الحقيقية)
        const SUPABASE_URL = 'https://your-project.supabase.co';
        const SUPABASE_ANON_KEY = 'your-anon-key';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // تحميل التفضيلات من Supabase
        async function loadPreferencesFromSupabase() {
            try {
                // محاكاة لجلب البيانات من Supabase
                // في التطبيق الحقيقي، استخدم:
                // const { data, error } = await supabase.from('user_preferences').select('*').eq('user_id', currentUser.id);
                
                // استخدام البيانات الافتراضية للعرض
                const userPreferences = userData;
                
                // تطبيق التفضيلات
                applyUserPreferences(userPreferences);
                
                // إذا كان المستخدم أدمن، نظهر قسم الأدمن
                if (userPreferences.isAdmin) {
                    adminSection.classList.remove('hidden');
                    adminPanelBtn.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Error loading preferences from Supabase:', error);
                // استخدام التفضيلات المحلية كبديل
                loadPreferencesFromLocalStorage();
            }
        }

        // تطبيق تفضيلات المستخدم
        function applyUserPreferences(preferences) {
            // تطبيق لون السمة
            document.body.setAttribute('data-theme', preferences.theme);
            
            // تحديث أزرار الألوان
            themeOptions.forEach(option => {
                if (option.getAttribute('data-theme') === preferences.theme) {
                    option.classList.add('border-4', 'border-blue-500', 'neon-glow');
                } else {
                    option.classList.remove('border-4', 'border-blue-500', 'neon-glow');
                }
            });

            // تطبيق اللغة
            if (preferences.language === 'en') {
                document.querySelectorAll('.en-text').forEach(el => el.classList.remove('hidden'));
                document.querySelectorAll('.ar-text').forEach(el => el.classList.add('hidden'));
                languageToggleSidebar.querySelector('span').textContent = 'العربية';
                document.dir = 'ltr';
            } else {
                document.querySelectorAll('.en-text').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('.ar-text').forEach(el => el.classList.remove('hidden'));
                languageToggleSidebar.querySelector('span').textContent = 'English';
                document.dir = 'rtl';
            }

            // تطبيق الوضع الداكن
            if (preferences.darkMode) {
                document.documentElement.classList.add('dark');
                darkModeToggleModal.checked = true;
                themeToggleSidebar.querySelector('i').className = 'fas fa-sun text-white text-sm';
                
                // تطبيق تأثير النيون في الوضع الداكن
                themeOptions.forEach(option => {
                    if (option.getAttribute('data-theme') === preferences.theme) {
                        option.classList.add('neon-glow');
                    }
                });
            } else {
                document.documentElement.classList.remove('dark');
                darkModeToggleModal.checked = false;
                themeToggleSidebar.querySelector('i').className = 'fas fa-moon text-white text-sm';
            }
        }

        // تحميل التفضيلات من localStorage (كبديل)
        function loadPreferencesFromLocalStorage() {
            const savedThemeColor = localStorage.getItem('themeColor') || 'blue';
            const savedLanguage = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            
            const preferences = {
                theme: savedThemeColor,
                language: savedLanguage,
                darkMode: savedDarkMode
            };
            
            applyUserPreferences(preferences);
        }

        // حفظ التفضيلات في Supabase
        async function savePreferencesToSupabase(preferences) {
            try {
                // محاكاة لحفظ البيانات في Supabase
                // في التطبيق الحقيقي، استخدم:
                // const { data, error } = await supabase.from('user_preferences').upsert({
                //   user_id: currentUser.id,
                //   theme: preferences.theme,
                //   language: preferences.language,
                //   dark_mode: preferences.darkMode
                // });
                
                console.log('Preferences saved to Supabase:', preferences);
                
                // حفظ في localStorage كنسخة احتياطية
                localStorage.setItem('themeColor', preferences.theme);
                localStorage.setItem('language', preferences.language);
                localStorage.setItem('darkMode', preferences.darkMode);
            } catch (error) {
                console.error('Error saving preferences to Supabase:', error);
                // حفظ في localStorage فقط
                localStorage.setItem('themeColor', preferences.theme);
                localStorage.setItem('language', preferences.language);
                localStorage.setItem('darkMode', preferences.darkMode);
            }
        }

        // تبديل الوضع الداكن
        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            
            // تحديث الأيقونة
            const icons = document.querySelectorAll('#theme-toggle-sidebar i');
            icons.forEach(icon => {
                icon.className = isDark ? 'fas fa-sun text-white text-sm' : 'fas fa-moon text-white text-sm';
            });
            
            // تحديث التبديل في النافذة
            darkModeToggleModal.checked = isDark;
            
            // تطبيق تأثير النيون في الوضع الداكن
            const currentTheme = document.body.getAttribute('data-theme');
            themeOptions.forEach(option => {
                if (option.getAttribute('data-theme') === currentTheme && isDark) {
                    option.classList.add('neon-glow');
                } else {
                    option.classList.remove('neon-glow');
                }
            });
            
            // حفظ التفضيلات
            savePreferencesToSupabase({
                theme: document.body.getAttribute('data-theme'),
                language: localStorage.getItem('language') || 'ar',
                darkMode: isDark
            });
        }

        // تبديل اللغة
        function toggleLanguage() {
            const isEnglish = document.querySelector('.en-text').classList.toggle('hidden');
            document.querySelector('.ar-text').classList.toggle('hidden');
            
            const newLanguage = isEnglish ? 'en' : 'ar';
            document.dir = isEnglish ? 'ltr' : 'rtl';
            
            // تحديث نص الزر
            languageToggleSidebar.querySelector('span').textContent = isEnglish ? 'العربية' : 'English';
            
            // تحديث أزرار اختيار اللغة
            document.querySelectorAll('.language-option').forEach(button => {
                button.classList.remove('border-primary', 'text-primary', 'bg-primary', 'bg-opacity-5');
                button.classList.add('border-gray-300', 'dark:border-gray-600', 'text-gray-700', 'dark:text-gray-300');
            });
            
            if (isEnglish) {
                document.querySelector('.language-option[data-lang="en"]').classList.add('border-primary', 'text-primary', 'bg-primary', 'bg-opacity-5');
            } else {
                document.querySelector('.language-option[data-lang="ar"]').classList.add('border-primary', 'text-primary', 'bg-primary', 'bg-opacity-5');
            }
            
            // حفظ التفضيلات
            savePreferencesToSupabase({
                theme: document.body.getAttribute('data-theme'),
                language: newLanguage,
                darkMode: document.documentElement.classList.contains('dark')
            });
        }

        // تغيير لون السمة
        function changeThemeColor(e) {
            const theme = e.target.getAttribute('data-theme');
            document.body.setAttribute('data-theme', theme);
            
            // تحديث التحديد
            themeOptions.forEach(option => {
                option.classList.remove('border-4', 'border-blue-500', 'neon-glow');
            });
            e.target.classList.add('border-4', 'border-blue-500');
            
            // تطبيق تأثير النيون في الوضع الداكن
            if (document.documentElement.classList.contains('dark')) {
                e.target.classList.add('neon-glow');
            }
            
            // حفظ التفضيلات
            savePreferencesToSupabase({
                theme: theme,
                language: localStorage.getItem('language') || 'ar',
                darkMode: document.documentElement.classList.contains('dark')
            });
        }

        // تغيير اللغة من الأزرار
        function changeLanguage(e) {
            const lang = e.target.getAttribute('data-lang');
            
            // إزالة التحديد من جميع الأزرار
            document.querySelectorAll('.language-option').forEach(button => {
                button.classList.remove('border-primary', 'text-primary', 'bg-primary', 'bg-opacity-5');
                button.classList.add('border-gray-300', 'dark:border-gray-600', 'text-gray-700', 'dark:text-gray-300');
            });
            
            // إضافة التحديد للزر المختار
            e.target.classList.add('border-primary', 'text-primary', 'bg-primary', 'bg-opacity-5');
            
            // تطبيق اللغة
            if (lang === 'en') {
                document.querySelectorAll('.en-text').forEach(el => el.classList.remove('hidden'));
                document.querySelectorAll('.ar-text').forEach(el => el.classList.add('hidden'));
                languageToggleSidebar.querySelector('span').textContent = 'العربية';
                document.dir = 'ltr';
            } else {
                document.querySelectorAll('.en-text').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('.ar-text').forEach(el => el.classList.remove('hidden'));
                languageToggleSidebar.querySelector('span').textContent = 'English';
                document.dir = 'rtl';
            }
            
            // حفظ التفضيلات
            savePreferencesToSupabase({
                theme: document.body.getAttribute('data-theme'),
                language: lang,
                darkMode: document.documentElement.classList.contains('dark')
            });
        }

        // إظهار/إخفاء القائمة المنسدلة للمستخدم
        function toggleUserDropdown() {
            userDropdown.classList.toggle('hidden');
        }

        // إظهار/إخفاء الشريط الجانبي على الجوال
        function toggleMobileSidebar() {
            sidebar.style.transform = 'translateX(0)';
        }

        // إغلاق الشريط الجانبي على الجوال
        function closeMobileSidebar() {
            sidebar.style.transform = 'translateX(-100%)';
        }

        // إظهار نافذة الإعدادات السريعة
        function showQuickSettings() {
            quickSettingsModal.classList.remove('hidden');
        }

        // إخفاء نافذة الإعدادات السريعة
        function hideQuickSettings() {
            quickSettingsModal.classList.add('hidden');
        }

        // تفعيل عنصر القائمة الجانبي
        function activateSidebarItem(e) {
            e.preventDefault();
            sidebarItems.forEach(item => item.classList.remove('active'));
            e.currentTarget.classList.add('active');
            
            // إغلاق الشريط الجانبي على الجوال بعد النقر
            if (window.innerWidth < 1024) {
                closeMobileSidebar();
            }
        }

        // تحميل بيانات المستخدم
        function loadUserData() {
            // استخدام البيانات الافتراضية
            document.getElementById('sidebar-user-name').textContent = userData.name;
            document.getElementById('sidebar-user-role').textContent = userData.role;
            
            // إذا كان المستخدم أدمن، نظهر قسم الأدمن
            if (userData.isAdmin) {
                adminSection.classList.remove('hidden');
                adminPanelBtn.classList.remove('hidden');
            }
        }

        // أحداث DOM
        document.addEventListener('DOMContentLoaded', function() {
            // تحميل التفضيلات والبيانات
            loadPreferencesFromSupabase();
            loadUserData();
            
            // إضافة مستمعي الأحداث
            themeToggleSidebar.addEventListener('click', toggleDarkMode);
            languageToggleSidebar.addEventListener('click', toggleLanguage);
            quickSettingsBtn.addEventListener('click', showQuickSettings);
            closeQuickSettings.addEventListener('click', hideQuickSettings);
            userMenuBtn.addEventListener('click', toggleUserDropdown);
            mobileMenuBtn.addEventListener('click', toggleMobileSidebar);
            closeSidebarBtn.addEventListener('click', closeMobileSidebar);
            darkModeToggleModal.addEventListener('change', toggleDarkMode);
            
            themeOptions.forEach(option => {
                option.addEventListener('click', changeThemeColor);
            });
            
            languageOptions.forEach(option => {
                option.addEventListener('click', changeLanguage);
            });
            
            sidebarItems.forEach(item => {
                item.addEventListener('click', activateSidebarItem);
            });
            
            // إغلاق القوائم المنسدلة عند النقر خارجها
            document.addEventListener('click', function(e) {
                if (!userMenuBtn.contains(e.target)) {
                    userDropdown.classList.add('hidden');
                }
                
                if (!quickSettingsBtn.contains(e.target) && !quickSettingsModal.contains(e.target)) {
                    quickSettingsModal.classList.add('hidden');
                }
                
                // إغلاق الشريط الجانبي على الجوال عند النقر خارجها
                if (window.innerWidth < 1024 && !sidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    closeMobileSidebar();
                }
            });
            
            // إغلاق الشريط الجانبي على الجوال عند تغيير حجم النافذة
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 1024) {
                    sidebar.style.transform = 'translateX(0)';
                } else {
                    closeMobileSidebar();
                }
            });
        });
    </script>
</body>
</html>
