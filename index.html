<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVPro - المنصة الاحترافية للبروفايل</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'rgb(var(--color-primary) / <alpha-value>)',
                        'primary-dark': 'rgb(var(--color-primary-dark) / <alpha-value>)',
                        'primary-light': 'rgb(var(--color-primary-light) / <alpha-value>)',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --color-primary: 59 130 246;
            --color-primary-dark: 37 99 235;
            --color-primary-light: 147 197 253;
        }
        
        [data-theme="blue"] { 
            --color-primary: 59 130 246;
            --color-primary-dark: 37 99 235;
            --color-primary-light: 147 197 253;
        }
        [data-theme="green"] { 
            --color-primary: 34 197 94;
            --color-primary-dark: 22 163 74;
            --color-primary-light: 134 239 172;
        }
        [data-theme="purple"] { 
            --color-primary: 168 85 247;
            --color-primary-dark: 147 51 234;
            --color-primary-light: 216 180 254;
        }
        [data-theme="red"] { 
            --color-primary: 239 68 68;
            --color-primary-dark: 220 38 38;
            --color-primary-light: 252 165 165;
        }
        [data-theme="orange"] { 
            --color-primary: 249 115 22;
            --color-primary-dark: 234 88 12;
            --color-primary-light: 253 186 116;
        }
        
        .theme-transition {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hidden {
            display: none !important;
        }
        
        .sidebar-item.active {
            background: linear-gradient(135deg, rgb(var(--color-primary) / 0.15) 0%, rgb(var(--color-primary) / 0.05) 100%);
            color: rgb(var(--color-primary));
            border-right: 3px solid rgb(var(--color-primary));
            box-shadow: 0 4px 12px rgb(var(--color-primary) / 0.1);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dark .glass-effect {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .shadow-glow {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .shadow-glow-primary {
            box-shadow: 0 8px 32px rgb(var(--color-primary) / 0.15);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .animate-slideIn {
            animation: slideIn 0.5s ease-out;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, rgb(var(--color-primary) / 0.08) 0%, rgb(var(--color-primary) / 0.03) 50%, transparent 100%);
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .dark .hover-lift:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, rgb(var(--color-primary)) 0%, rgb(var(--color-primary-dark)) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .bg-gradient-primary {
            background: linear-gradient(135deg, rgb(var(--color-primary)) 0%, rgb(var(--color-primary-dark)) 100%);
        }
        
        .sidebar-glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .sidebar-glass {
            background: rgba(0, 0, 0, 0.3);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .header-glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .header-glass {
            background: rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-glass {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .card-glass {
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .skill-tag {
            display: inline-block;
            background: rgb(var(--color-primary) / 0.1);
            color: rgb(var(--color-primary));
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 2px;
            border: 1px solid rgb(var(--color-primary) / 0.2);
        }
        
        .type-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .type-certificate {
            background: rgba(59, 130, 246, 0.1);
            color: rgb(59, 130, 246);
        }
        
        .type-experience {
            background: rgba(34, 197, 94, 0.1);
            color: rgb(34, 197, 94);
        }
        
        .type-project {
            background: rgba(168, 85, 247, 0.1);
            color: rgb(168, 85, 247);
        }
        
        .action-btn {
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .edit-btn {
            background: rgba(59, 130, 246, 0.1);
            color: rgb(59, 130, 246);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .edit-btn:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        
        .delete-btn {
            background: rgba(239, 68, 68, 0.1);
            color: rgb(239, 68, 68);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        .delete-btn:hover {
            background: rgba(239, 68, 68, 0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-950 dark:to-gray-900 theme-transition" data-theme="blue">
    <!-- الهيكل الرئيسي -->
    <div class="flex h-screen overflow-hidden">
        <!-- الشريط الجانبي -->
        <div id="sidebar" class="w-80 sidebar-glass theme-transition flex flex-col transform transition-all duration-500 z-30 fixed lg:relative lg:translate-x-0 h-full" style="transform: translateX(-100%);">
            <!-- اللوجو وزر الإغلاق -->
            <div class="p-6 border-b border-gray-200/30 dark:border-gray-700/30 flex items-center justify-between">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="w-12 h-12 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                        <i class="fas fa-user-tie text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800 dark:text-white">CVPro</h1>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">منصة البروفايل الاحترافية</p>
                    </div>
                </div>
                <button id="close-sidebar" class="p-2 rounded-xl hover:bg-gray-200/50 dark:hover:bg-gray-700/50 text-gray-500 dark:text-gray-400 lg:hidden">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>

            <!-- الملف الشخصي المصغر -->
            <div class="p-6 border-b border-gray-200/30 dark:border-gray-700/30">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="relative">
                        <div class="w-16 h-16 bg-gradient-primary rounded-2xl overflow-hidden border-4 border-white/70 dark:border-gray-800/70 shadow-glow">
                            <img id="sidebar-user-image" src="" alt="" class="w-full h-full object-cover hidden">
                            <div class="w-full h-full flex items-center justify-center text-white">
                                <i class="fas fa-user text-xl"></i>
                            </div>
                        </div>
                        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white/70 dark:border-gray-800/70 shadow-glow"></div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p id="sidebar-user-name" class="text-lg font-semibold text-gray-800 dark:text-white truncate">أحمد محمد</p>
                        <p id="sidebar-user-role" class="text-sm text-gray-500 dark:text-gray-400 truncate">مهندس برمجيات</p>
                        <div class="flex items-center mt-1">
                            <div class="flex text-yellow-400 text-xs">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-xs text-gray-500 dark:text-gray-400 mr-1">4.7</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القائمة الرئيسية -->
            <nav class="flex-1 p-6 space-y-2 overflow-y-auto">
                <a href="#" class="sidebar-item dashboard-link flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition active group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-home text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">لوحة التحكم</span>
                    <span class="en-text hidden font-medium">Dashboard</span>
                </a>
                
                <a href="#" class="sidebar-item certificates-link flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-certificate text-white text-sm"></i>
                    </div>
                    <div class="flex-1 flex items-center justify-between">
                        <span class="ar-text font-medium">الشهادات</span>
                        <span class="en-text hidden font-medium">Certificates</span>
                        <span class="bg-primary text-white text-xs px-2 py-1 rounded-full shadow-glow" id="certificates-count">3/10</span>
                    </div>
                </a>
                
                <a href="#" class="sidebar-item add-certificate-link flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-plus text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">إضافة شهادة</span>
                    <span class="en-text hidden font-medium">Add Certificate</span>
                </a>
                
                <a href="#" class="sidebar-item profile-link flex items-center space-x-4 space-x-reverse p-4 rounded-2xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition group hover-lift">
                    <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <span class="ar-text font-medium">البروفايل</span>
                    <span class="en-text hidden font-medium">Profile</span>
                </a>
            </nav>

            <!-- الإعدادات السريعة -->
            <div class="p-6 border-t border-gray-200/30 dark:border-gray-700/30">
                <div class="space-y-3">
                    <button id="theme-toggle-sidebar" class="flex items-center space-x-4 space-x-reverse p-3 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition w-full text-right group hover-lift">
                        <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-glow-primary group-hover:scale-110 transition-transform">
                            <i class="fas fa-moon text-white text-sm"></i>
                        </div>
                        <span class="ar-text font-medium">الوضع الداكن</span>
                        <span class="en-text hidden font-medium">Dark Mode</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- المحتوى الرئيسي -->
        <div class="flex-1 flex flex-col overflow-hidden lg:ml-0">
            <!-- الشريط العلوي -->
            <header class="header-glass shadow-sm theme-transition z-20">
                <div class="flex items-center justify-between px-6 py-4">
                    <!-- زر القائمة للجوال -->
                    <button id="mobile-menu-btn" class="p-3 rounded-2xl hover:bg-gray-200/30 dark:hover:bg-gray-700/30 text-gray-600 dark:text-gray-300 theme-transition lg:hidden">
                        <i class="fas fa-bars text-xl"></i>
                    </button>

                    <!-- العنوان والمسار -->
                    <div class="flex-1 flex items-center space-x-4 space-x-reverse mr-4">
                        <h1 id="page-title" class="text-2xl font-bold text-gray-800 dark:text-white hidden md:block">
                            <span class="ar-text">لوحة التحكم</span>
                            <span class="en-text hidden">Dashboard</span>
                        </h1>
                        <div class="hidden md:flex items-center space-x-2 space-x-reverse text-sm text-gray-500 dark:text-gray-400">
                            <span>CVPro</span>
                            <i class="fas fa-chevron-left text-xs"></i>
                            <span id="breadcrumb" class="text-primary font-medium">
                                <span class="ar-text">الرئيسية</span>
                                <span class="en-text hidden">Home</span>
                            </span>
                        </div>
                    </div>

                    <!-- الأزرار العلوية -->
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <!-- زر إضافة شهادة سريع -->
                        <button class="add-certificate-link bg-gradient-primary text-white hover:shadow-glow-primary px-4 py-2 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                            <i class="fas fa-plus"></i>
                            <span class="ar-text">إضافة شهادة</span>
                            <span class="en-text hidden">Add Certificate</span>
                        </button>

                        <!-- زر عرض البروفايل -->
                        <button class="profile-link bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 px-4 py-2 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                            <i class="fas fa-user"></i>
                            <span class="ar-text">البروفايل</span>
                            <span class="en-text hidden">Profile</span>
                        </button>

                        <!-- قائمة المستخدم -->
                        <div class="relative">
                            <button id="user-menu-btn" class="flex items-center space-x-3 space-x-reverse bg-gray-100/30 dark:bg-gray-700/30 rounded-2xl pl-3 pr-4 py-2 hover:bg-gray-200/30 dark:hover:bg-gray-600/30 theme-transition">
                                <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center text-white text-sm shadow-glow-primary">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="text-right hidden md:block">
                                    <p class="text-sm font-semibold text-gray-800 dark:text-white">أحمد محمد</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">مستخدم محترف</p>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- المحتوى الديناميكي -->
            <main class="flex-1 overflow-y-auto p-6 gradient-bg">
                <!-- محتوى لوحة التحكم -->
                <div id="dashboard-content" class="animate-fadeIn">
                    <!-- الترحيب والإحصائيات -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                            <span class="ar-text">مرحباً بعودتك، أحمد! 👋</span>
                            <span class="en-text hidden">Welcome back, Ahmed! 👋</span>
                        </h1>
                        <p class="text-gray-600 dark:text-gray-400 text-lg">
                            <span class="ar-text">هذه نظرة عامة على بروفايلك وإحصائياته</span>
                            <span class="en-text hidden">Here's an overview of your profile and statistics</span>
                        </p>
                    </div>

                    <!-- بطاقات الإحصائيات -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="card-glass rounded-2xl p-6 shadow-glow theme-transition hover-lift">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-1">
                                        <span class="ar-text">إجمالي الشهادات</span>
                                        <span class="en-text hidden">Total Certificates</span>
                                    </p>
                                    <p class="text-2xl font-bold text-gray-800 dark:text-white" id="total-certificates">8/10</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-glow">
                                    <i class="fas fa-certificate text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                                <p class="text-blue-600 text-xs mt-2">
                                    <span class="ar-text">2 شهادات متبقية</span>
                                    <span class="en-text hidden">2 certificates remaining</span>
                                </p>
                            </div>
                        </div>

                        <div class="card-glass rounded-2xl p-6 shadow-glow theme-transition hover-lift">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-1">
                                        <span class="ar-text">المشاهدات</span>
                                        <span class="en-text hidden">Profile Views</span>
                                    </p>
                                    <p class="text-2xl font-bold text-gray-800 dark:text-white">1,247</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-glow">
                                    <i class="fas fa-eye text-white text-xl"></i>
                                </div>
                            </div>
                            <p class="text-green-600 text-sm mt-4 flex items-center">
                                <i class="fas fa-arrow-up ml-1"></i>
                                <span class="ar-text">12% زيادة هذا الشهر</span>
                                <span class="en-text hidden">12% increase this month</span>
                            </p>
                        </div>

                        <div class="card-glass rounded-2xl p-6 shadow-glow theme-transition hover-lift">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm mb-1">
                                        <span class="ar-text">التقييم</span>
                                        <span class="en-text hidden">Rating</span>
                                    </p>
                                    <p class="text-2xl font-bold text-gray-800 dark:text-white">4.8/5</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl flex items-center justify-center shadow-glow">
                                    <i class="fas fa-star text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="flex mt-4">
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star text-yellow-400 ml-1"></i>
                                <i class="fas fa-star-half-alt text-yellow-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- الأقسام الرئيسية -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- الشهادات الحديثة -->
                        <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                                    <span class="ar-text">أحدث الشهادات</span>
                                    <span class="en-text hidden">Recent Certificates</span>
                                </h2>
                                <a href="#" class="text-primary hover:underline text-sm font-medium flex items-center certificates-link">
                                    <span class="ar-text">عرض الكل</span>
                                    <span class="en-text hidden">View All</span>
                                    <i class="fas fa-arrow-left mr-1 text-xs"></i>
                                </a>
                            </div>

                            <div id="recent-certificates" class="space-y-4">
                                <!-- سيتم ملؤها بالبيانات من JavaScript -->
                            </div>

                            <button class="w-full mt-6 bg-gradient-primary text-white hover:shadow-glow-primary py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift add-certificate-link">
                                <i class="fas fa-plus"></i>
                                <span class="ar-text">إضافة شهادة جديدة</span>
                                <span class="en-text hidden">Add New Certificate</span>
                            </button>
                        </div>

                        <!-- الإجراءات السريعة -->
                        <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition">
                            <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-6">
                                <span class="ar-text">الإجراءات السريعة</span>
                                <span class="en-text hidden">Quick Actions</span>
                            </h2>

                            <div class="grid grid-cols-2 gap-4">
                                <a href="#" class="profile-action p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-user text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">البروفايل</span>
                                        <span class="en-text hidden">Profile</span>
                                    </span>
                                </a>

                                <a href="#" class="add-certificate-action p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-plus text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">إضافة شهادة</span>
                                        <span class="en-text hidden">Add Certificate</span>
                                    </span>
                                </a>

                                <a href="#" class="certificates-action p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-certificate text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">الشهادات</span>
                                        <span class="en-text hidden">Certificates</span>
                                    </span>
                                </a>

                                <a href="#" class="share-profile p-5 bg-gradient-to-br from-gray-50/30 to-white/30 dark:from-gray-700/30 dark:to-gray-800/30 rounded-2xl hover:shadow-lg theme-transition text-center border border-gray-200/30 dark:border-gray-700/30 group hover-lift glass-effect">
                                    <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform shadow-glow-primary">
                                        <i class="fas fa-share-alt text-white text-xl"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-800 dark:text-white block">
                                        <span class="ar-text">مشاركة</span>
                                        <span class="en-text hidden">Share</span>
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- محتوى إضافة الشهادة -->
                <div id="add-certificate-content" class="hidden animate-fadeIn">
                    <!-- العنوان -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                            <span class="ar-text">إضافة شهادة جديدة</span>
                            <span class="en-text hidden">Add New Certificate</span>
                        </h1>
                        <p class="text-gray-600 dark:text-gray-400 text-lg">
                            <span class="ar-text">أضف شهاداتك ومشاريعك وخبراتك لتعزيز بروفايلك</span>
                            <span class="en-text hidden">Add your certificates, projects and experiences to enhance your profile</span>
                        </p>
                    </div>

                    <!-- نموذج إضافة الشهادة -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- نموذج الإضافة -->
                        <div class="lg:col-span-2">
                            <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition">
                                <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-6">
                                    <span class="ar-text">معلومات الشهادة</span>
                                    <span class="en-text hidden">Certificate Information</span>
                                </h2>

                                <form id="add-certificate-form" class="space-y-6">
                                    <!-- اسم الشهادة -->
                                    <div>
                                        <label for="certificate-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">اسم الشهادة</span>
                                            <span class="en-text hidden">Certificate Name</span>
                                        </label>
                                        <input type="text" id="certificate-name" required
                                            class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition"
                                            placeholder="أدخل اسم الشهادة">
                                    </div>

                                    <!-- نوع الشهادة -->
                                    <div>
                                        <label for="certificate-type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">نوع الشهادة</span>
                                            <span class="en-text hidden">Certificate Type</span>
                                        </label>
                                        <select id="certificate-type" required
                                            class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition">
                                            <option value="">اختر نوع الشهادة</option>
                                            <option value="certificate">شهادة</option>
                                            <option value="experience">شهادة خبرة</option>
                                            <option value="project">مشروع</option>
                                        </select>
                                    </div>

                                    <!-- صورة الشهادة -->
                                    <div>
                                        <label for="certificate-image" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">صورة الشهادة</span>
                                            <span class="en-text hidden">Certificate Image</span>
                                        </label>
                                        <div class="flex items-center justify-center w-full">
                                            <label for="certificate-image" class="flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl cursor-pointer bg-white/30 dark:bg-gray-800/30 hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition">
                                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                                    <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-4"></i>
                                                    <p class="mb-2 text-sm text-gray-500 dark:text-gray-400">
                                                        <span class="ar-text">انقر لرفع الصورة</span>
                                                        <span class="en-text hidden">Click to upload image</span>
                                                    </p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">
                                                        <span class="ar-text">PNG, JPG, GIF (الحد الأقصى 5MB)</span>
                                                        <span class="en-text hidden">PNG, JPG, GIF (MAX. 5MB)</span>
                                                    </p>
                                                </div>
                                                <input id="certificate-image" type="file" class="hidden" accept="image/*">
                                            </label>
                                        </div>
                                        <div id="image-preview" class="mt-4 hidden">
                                            <img id="preview-img" class="max-h-48 rounded-2xl shadow-glow mx-auto">
                                        </div>
                                    </div>

                                    <!-- التاريخ -->
                                    <div>
                                        <label for="certificate-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">تاريخ الحصول على الشهادة</span>
                                            <span class="en-text hidden">Certificate Date</span>
                                        </label>
                                        <input type="date" id="certificate-date" required
                                            class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition">
                                    </div>

                                    <!-- رابط التحقق -->
                                    <div>
                                        <label for="certificate-url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">رابط التحقق (اختياري)</span>
                                            <span class="en-text hidden">Verification URL (Optional)</span>
                                        </label>
                                        <input type="url" id="certificate-url"
                                            class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition"
                                            placeholder="https://example.com/verify">
                                    </div>

                                    <!-- المهارات -->
                                    <div>
                                        <label for="certificate-skills" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">المهارات (اختياري)</span>
                                            <span class="en-text hidden">Skills (Optional)</span>
                                        </label>
                                        <div class="flex flex-wrap gap-2 mb-2" id="skills-container">
                                            <!-- سيتم إضافة المهارات هنا -->
                                        </div>
                                        <div class="flex">
                                            <input type="text" id="skill-input"
                                                class="flex-1 px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-r-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition"
                                                placeholder="أضف مهارة">
                                            <button type="button" id="add-skill-btn" class="bg-gradient-primary text-white px-4 rounded-l-2xl hover:shadow-glow-primary transition-all">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                            <span class="ar-text">اضغط Enter أو زر الإضافة لإدراج المهارة</span>
                                            <span class="en-text hidden">Press Enter or Add button to insert skill</span>
                                        </p>
                                    </div>

                                    <!-- الوصف -->
                                    <div>
                                        <label for="certificate-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span class="ar-text">وصف الشهادة (اختياري)</span>
                                            <span class="en-text hidden">Certificate Description (Optional)</span>
                                        </label>
                                        <textarea id="certificate-description" rows="4"
                                            class="w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition"
                                            placeholder="أدخل وصفاً للشهادة"></textarea>
                                    </div>

                                    <!-- أزرار الإرسال -->
                                    <div class="flex space-x-4 space-x-reverse pt-4">
                                        <button type="submit" class="flex-1 bg-gradient-primary text-white hover:shadow-glow-primary py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                                            <i class="fas fa-save"></i>
                                            <span class="ar-text">حفظ الشهادة</span>
                                            <span class="en-text hidden">Save Certificate</span>
                                        </button>
                                        <button type="button" class="flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift dashboard-link">
                                            <i class="fas fa-times"></i>
                                            <span class="ar-text">إلغاء</span>
                                            <span class="en-text hidden">Cancel</span>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- التعليمات والإرشادات -->
                        <div class="lg:col-span-1">
                            <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition sticky top-6">
                                <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-4">
                                    <span class="ar-text">نصائح للإضافة</span>
                                    <span class="en-text hidden">Adding Tips</span>
                                </h2>
                                
                                <div class="space-y-4">
                                    <div class="flex items-start space-x-3 space-x-reverse">
                                        <div class="w-8 h-8 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                            <i class="fas fa-info text-primary text-sm"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-medium text-gray-800 dark:text-white">
                                                <span class="ar-text">صور واضحة</span>
                                                <span class="en-text hidden">Clear Images</span>
                                            </h3>
                                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                                <span class="ar-text">استخدم صوراً عالية الجودة للشهادات</span>
                                                <span class="en-text hidden">Use high quality images for certificates</span>
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-start space-x-3 space-x-reverse">
                                        <div class="w-8 h-8 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                            <i class="fas fa-link text-primary text-sm"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-medium text-gray-800 dark:text-white">
                                                <span class="ar-text">روابط التحقق</span>
                                                <span class="en-text hidden">Verification Links</span>
                                            </h3>
                                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                                <span class="ar-text">أضف روابط للتحقق من صحة الشهادات</span>
                                                <span class="en-text hidden">Add links to verify certificate authenticity</span>
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-start space-x-3 space-x-reverse">
                                        <div class="w-8 h-8 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                            <i class="fas fa-tags text-primary text-sm"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-medium text-gray-800 dark:text-white">
                                                <span class="ar-text">المهارات</span>
                                                <span class="en-text hidden">Skills</span>
                                            </h3>
                                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                                <span class="ar-text">أضف المهارات المرتبطة بالشهادة</span>
                                                <span class="en-text hidden">Add skills related to the certificate</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-6 p-4 bg-gradient-to-r from-primary/10 to-primary/5 rounded-2xl border border-primary/20">
                                    <h3 class="font-semibold text-primary flex items-center">
                                        <i class="fas fa-lightbulb ml-2"></i>
                                        <span class="ar-text">نصيحة</span>
                                        <span class="en-text hidden">Tip</span>
                                    </h3>
                                    <p class="text-sm text-gray-700 dark:text-gray-300 mt-2">
                                        <span class="ar-text">أضف أكبر عدد ممكن من الشهادات والخبرات لزيادة مصداقية بروفايلك</span>
                                        <span class="en-text hidden">Add as many certificates and experiences as possible to increase your profile credibility</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- محتوى الشهادات -->
                <div id="certificates-content" class="hidden animate-fadeIn">
                    <!-- العنوان -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                            <span class="ar-text">شهاداتي ومشاريعي</span>
                            <span class="en-text hidden">My Certificates & Projects</span>
                        </h1>
                        <p class="text-gray-600 dark:text-gray-400 text-lg">
                            <span class="ar-text">جميع شهاداتي وخبراتي ومشاريعي المعتمدة</span>
                            <span class="en-text hidden">All my certified certificates, experiences and projects</span>
                        </p>
                    </div>

                    <!-- مرشحات الشهادات -->
                    <div class="card-glass rounded-2xl shadow-glow p-6 mb-6 theme-transition">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                            <div class="flex space-x-2 space-x-reverse">
                                <button class="filter-btn active px-4 py-2 bg-gradient-primary text-white rounded-2xl text-sm font-medium shadow-glow-primary" data-filter="all">
                                    <span class="ar-text">الكل</span>
                                    <span class="en-text hidden">All</span>
                                </button>
                                <button class="filter-btn px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-2xl text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-all" data-filter="certificate">
                                    <span class="ar-text">شهادات</span>
                                    <span class="en-text hidden">Certificates</span>
                                </button>
                                <button class="filter-btn px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-2xl text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-all" data-filter="experience">
                                    <span class="ar-text">خبرات</span>
                                    <span class="en-text hidden">Experiences</span>
                                </button>
                                <button class="filter-btn px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-2xl text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-all" data-filter="project">
                                    <span class="ar-text">مشاريع</span>
                                    <span class="en-text hidden">Projects</span>
                                </button>
                            </div>
                            
                            <button class="add-certificate-link bg-gradient-primary text-white hover:shadow-glow-primary px-4 py-2 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift w-full md:w-auto">
                                <i class="fas fa-plus"></i>
                                <span class="ar-text">إضافة شهادة جديدة</span>
                                <span class="en-text hidden">Add New Certificate</span>
                            </button>
                        </div>
                    </div>

                    <!-- قائمة الشهادات -->
                    <div id="certificates-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- سيتم ملؤها بالبيانات من JavaScript -->
                    </div>
                </div>

                <!-- محتوى البروفايل -->
                <div id="profile-content" class="hidden animate-fadeIn">
                    <!-- العنوان -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                            <span class="ar-text">البروفايل الشخصي</span>
                            <span class="en-text hidden">Personal Profile</span>
                        </h1>
                        <p class="text-gray-600 dark:text-gray-400 text-lg">
                            <span class="ar-text">إدارة معلوماتك الشخصية وشهاداتك</span>
                            <span class="en-text hidden">Manage your personal information and certificates</span>
                        </p>
                    </div>

                    <!-- البروفايل الشخصي -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- معلومات المستخدم -->
                        <div class="lg:col-span-1">
                            <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition sticky top-6">
                                <div class="text-center">
                                    <!-- صورة البروفايل -->
                                    <div class="relative inline-block mb-4">
                                        <div class="w-32 h-32 bg-gradient-primary rounded-2xl overflow-hidden border-4 border-white/70 dark:border-gray-800/70 shadow-glow mx-auto">
                                            <img id="profile-user-image" src="" alt="" class="w-full h-full object-cover hidden">
                                            <div class="w-full h-full flex items-center justify-center text-white">
                                                <i class="fas fa-user text-3xl"></i>
                                            </div>
                                        </div>
                                        <button class="absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full shadow-glow hover:bg-primary-dark transition-all">
                                            <i class="fas fa-camera text-sm"></i>
                                        </button>
                                    </div>
                                    
                                    <!-- اسم المستخدم -->
                                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white" id="profile-user-name">أحمد محمد</h2>
                                    <p class="text-lg text-primary font-medium mt-1" id="profile-user-role">مهندس برمجيات</p>
                                    
                                    <!-- زر تعديل المعلومات -->
                                    <button class="edit-profile-btn w-full mt-6 bg-gradient-primary text-white hover:shadow-glow-primary py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                                        <i class="fas fa-edit"></i>
                                        <span class="ar-text">تعديل المعلومات</span>
                                        <span class="en-text hidden">Edit Information</span>
                                    </button>
                                    
                                    <!-- زر مشاركة البروفايل -->
                                    <button id="share-profile-btn" class="w-full mt-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                                        <i class="fas fa-share-alt"></i>
                                        <span class="ar-text">مشاركة البروفايل</span>
                                        <span class="en-text hidden">Share Profile</span>
                                    </button>
                                </div>
                                
                                <!-- المهارات -->
                                <div class="mt-6">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3 text-center">
                                        <span class="ar-text">المهارات</span>
                                        <span class="en-text hidden">Skills</span>
                                    </h3>
                                    <div class="flex flex-wrap justify-center gap-2" id="profile-skills">
                                        <!-- سيتم ملؤها بالبيانات من JavaScript -->
                                    </div>
                                    <button class="edit-skills-btn w-full mt-4 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 py-2 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse text-sm font-medium">
                                        <i class="fas fa-plus"></i>
                                        <span class="ar-text">إضافة مهارة</span>
                                        <span class="en-text hidden">Add Skill</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- الشهادات في البروفايل -->
                        <div class="lg:col-span-2">
                            <div class="card-glass rounded-2xl shadow-glow p-6 theme-transition">
                                <div class="flex justify-between items-center mb-6">
                                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                                        <span class="ar-text">الشهادات والخبرات</span>
                                        <span class="en-text hidden">Certificates & Experiences</span>
                                    </h2>
                                    
                                    <button class="add-certificate-link bg-gradient-primary text-white hover:shadow-glow-primary px-4 py-2 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium hover-lift">
                                        <i class="fas fa-plus"></i>
                                        <span class="ar-text">إضافة شهادة</span>
                                        <span class="en-text hidden">Add Certificate</span>
                                    </button>
                                </div>

                                <div id="profile-certificates" class="space-y-6">
                                    <!-- سيتم ملؤها بالبيانات من JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- نافذة مشاركة البروفايل -->
    <div id="share-profile-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden theme-transition backdrop-blur-sm">
        <div class="bg-white/90 dark:bg-gray-800/90 glass-effect rounded-3xl shadow-2xl w-full max-w-md mx-4 theme-transition animate-fadeIn border border-gray-200/30 dark:border-gray-700/30">
            <div class="p-6 border-b border-gray-200/30 dark:border-gray-700/30">
                <h3 class="text-xl font-bold text-gray-800 dark:text-white flex items-center">
                    <i class="fas fa-share-alt text-primary ml-2"></i>
                    <span class="ar-text">مشاركة البروفايل</span>
                    <span class="en-text hidden">Share Profile</span>
                </h3>
            </div>
            
            <div class="p-6">
                <p class="text-gray-700 dark:text-gray-300 mb-4">
                    <span class="ar-text">انسخ الرابط أدناه لمشاركة بروفايلك مع الآخرين:</span>
                    <span class="en-text hidden">Copy the link below to share your profile with others:</span>
                </p>
                
                <div class="flex mb-6">
                    <input type="text" id="profile-share-url" readonly
                        class="flex-1 px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-gray-300/50 dark:border-gray-600/50 rounded-r-2xl focus:ring-2 focus:ring-primary focus:border-transparent theme-transition"
                        value="https://cvpro.com/profile/ahmed-mohamed">
                    <button id="copy-profile-url" class="bg-gradient-primary text-white px-4 rounded-l-2xl hover:shadow-glow-primary transition-all">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
            
            <div class="flex justify-end p-6 border-t border-gray-200/30 dark:border-gray-700/30">
                <button id="close-share-profile" class="bg-gradient-primary text-white px-8 py-3 rounded-2xl hover:shadow-glow-primary transition-all duration-300 font-medium hover-lift">
                    <span class="ar-text">تم</span>
                    <span class="en-text hidden">Done</span>
                </button>
            </div>
        </div>
    </div>

    <!-- بيانات افتراضية للعرض -->
    <script>
        // بيانات المستخدم الافتراضية
        const userData = {
            id: 1,
            name: "أحمد محمد",
            email: "ahmed@example.com",
            role: "مهندس برمجيات",
            bio: "مطور ويب بخبرة تزيد عن 5 سنوات، متخصص في تطوير تطبيقات الويب باستخدام React وNode.js. أحب حل المشكلات المعقدة وبناء منتجات رقمية مبتكرة.",
            isAdmin: true,
            profileImage: "",
            theme: "blue",
            language: "ar",
            darkMode: false,
            skills: ["JavaScript", "React", "Node.js", "HTML", "CSS", "MongoDB", "Git", "REST APIs"]
        };

        // بيانات الشهادات الافتراضية
        const certificatesData = [
            {
                id: 1,
                title: "شهادة تطوير الويب المتقدم",
                type: "certificate",
                image: "",
                date: "2023-03-15",
                verifyUrl: "https://www.edraak.org/certificate/123456",
                skills: ["HTML", "CSS", "JavaScript", "React"],
                description: "شهادة في تطوير الويب تشمل HTML, CSS, JavaScript و React",
                issuer: "منصة إدراك"
            },
            {
                id: 2,
                title: "شهادة React المتقدمة",
                type: "certificate",
                image: "",
                date: "2023-02-10",
                verifyUrl: "https://www.udemy.com/certificate/123456",
                skills: ["React", "Redux", "Hooks", "Context API"],
                description: "شهادة متقدمة في React وتطبيقاتها مع مشروع نهائي",
                issuer: "Udemy"
            },
            {
                id: 3,
                title: "مشروع نظام إدارة المهام",
                type: "project",
                image: "",
                date: "2023-01-05",
                verifyUrl: "https://github.com/ahmed/task-manager",
                skills: ["React", "Node.js", "MongoDB", "JWT"],
                description: "نظام متكامل لإدارة المهام والمشاريع مع فريق العمل",
                issuer: "مشروع شخصي"
            },
            {
                id: 4,
                title: "شهادة خبرة في شركة تكنولوجيا",
                type: "experience",
                image: "",
                date: "2022-11-20",
                verifyUrl: "",
                skills: ["Team Leadership", "Project Management", "Agile", "Scrum"],
                description: "عملت كمطور رئيسي في فريق مكون من 5 أفراد لمشروع تطبيق جوال",
                issuer: "شركة تكنولوجيا Solutions"
            }
        ];

        // بيانات الإحصائيات الافتراضية
        const statsData = {
            totalCertificates: certificatesData.length,
            maxCertificates: 10,
            profileViews: 1247,
            rating: 4.8
        };
    </script>

    <script>
        // عناصر DOM
        const sidebar = document.getElementById('sidebar');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeSidebarBtn = document.getElementById('close-sidebar');
        const themeToggleSidebar = document.getElementById('theme-toggle-sidebar');
        
        // عناصر المحتوى
        const dashboardContent = document.getElementById('dashboard-content');
        const addCertificateContent = document.getElementById('add-certificate-content');
        const certificatesContent = document.getElementById('certificates-content');
        const profileContent = document.getElementById('profile-content');
        
        // عناصر التنقل
        const dashboardLink = document.querySelector('.dashboard-link');
        const addCertificateLink = document.querySelector('.add-certificate-link');
        const certificatesLink = document.querySelector('.certificates-link');
        const profileLink = document.querySelector('.profile-link');
        const addCertificateAction = document.querySelector('.add-certificate-action');
        const certificatesAction = document.querySelector('.certificates-action');
        const profileAction = document.querySelector('.profile-action');
        
        // عناصر الصفحة
        const pageTitle = document.getElementById('page-title');
        const breadcrumb = document.getElementById('breadcrumb');
        const totalCertificates = document.getElementById('total-certificates');
        const certificatesCount = document.getElementById('certificates-count');
        const recentCertificates = document.getElementById('recent-certificates');
        const certificatesList = document.getElementById('certificates-list');
        const profileCertificates = document.getElementById('profile-certificates');
        const profileSkills = document.getElementById('profile-skills');
        const shareProfileBtn = document.getElementById('share-profile-btn');
        const shareProfileModal = document.getElementById('share-profile-modal');
        const closeShareProfile = document.getElementById('close-share-profile');
        const copyProfileUrl = document.getElementById('copy-profile-url');
        
        // عناصر النموذج
        const addCertificateForm = document.getElementById('add-certificate-form');
        const certificateImage = document.getElementById('certificate-image');
        const imagePreview = document.getElementById('image-preview');
        const previewImg = document.getElementById('preview-img');
        const skillInput = document.getElementById('skill-input');
        const addSkillBtn = document.getElementById('add-skill-btn');
        const skillsContainer = document.getElementById('skills-container');
        const filterBtns = document.querySelectorAll('.filter-btn');

        // تهيئة Supabase (استبدل بالمفاتيح الحقيقية)
        const SUPABASE_URL = 'https://your-project.supabase.co';
        const SUPABASE_ANON_KEY = 'your-anon-key';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // متغيرات التطبيق
        let currentSkills = [];
        let currentFilter = 'all';
        let editingCertificateId = null;

        // تحميل التفضيلات من Supabase
        async function loadPreferencesFromSupabase() {
            try {
                // استخدام البيانات الافتراضية للعرض
                const userPreferences = userData;
                
                // تطبيق التفضيلات
                applyUserPreferences(userPreferences);
                
            } catch (error) {
                console.error('Error loading preferences from Supabase:', error);
                // استخدام التفضيلات المحلية كبديل
                loadPreferencesFromLocalStorage();
            }
        }

        // تطبيق تفضيلات المستخدم
        function applyUserPreferences(preferences) {
            // تطبيق لون السمة
            document.body.setAttribute('data-theme', preferences.theme);

            // تطبيق اللغة
            if (preferences.language === 'en') {
                document.querySelectorAll('.en-text').forEach(el => el.classList.remove('hidden'));
                document.querySelectorAll('.ar-text').forEach(el => el.classList.add('hidden'));
                document.dir = 'ltr';
            } else {
                document.querySelectorAll('.en-text').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('.ar-text').forEach(el => el.classList.remove('hidden'));
                document.dir = 'rtl';
            }

            // تطبيق الوضع الداكن
            if (preferences.darkMode) {
                document.documentElement.classList.add('dark');
                themeToggleSidebar.querySelector('i').className = 'fas fa-sun text-white text-sm';
            } else {
                document.documentElement.classList.remove('dark');
                themeToggleSidebar.querySelector('i').className = 'fas fa-moon text-white text-sm';
            }
        }

        // تحميل التفضيلات من localStorage (كبديل)
        function loadPreferencesFromLocalStorage() {
            const savedThemeColor = localStorage.getItem('themeColor') || 'blue';
            const savedLanguage = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            
            const preferences = {
                theme: savedThemeColor,
                language: savedLanguage,
                darkMode: savedDarkMode
            };
            
            applyUserPreferences(preferences);
        }

        // تحميل بيانات المستخدم
        function loadUserData() {
            // استخدام البيانات الافتراضية
            document.getElementById('sidebar-user-name').textContent = userData.name;
            document.getElementById('sidebar-user-role').textContent = userData.role;
            document.getElementById('profile-user-name').textContent = userData.name;
            document.getElementById('profile-user-role').textContent = userData.role;
            
            // تحديث المهارات في البروفايل
            updateProfileSkills();
        }

        // تحديث المهارات في البروفايل
        function updateProfileSkills() {
            profileSkills.innerHTML = '';
            userData.skills.forEach(skill => {
                const skillElement = document.createElement('span');
                skillElement.className = 'skill-tag';
                skillElement.textContent = skill;
                
                // إضافة زر حذف للمهارة
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-btn action-btn mr-1';
                deleteBtn.innerHTML = '<i class="fas fa-times text-xs"></i>';
                deleteBtn.onclick = function() {
                    deleteSkill(skill);
                };
                
                skillElement.appendChild(deleteBtn);
                profileSkills.appendChild(skillElement);
            });
        }

        // حذف مهارة
        function deleteSkill(skill) {
            userData.skills = userData.skills.filter(s => s !== skill);
            updateProfileSkills();
        }

        // تحميل الشهادات وعرضها
        function loadCertificates() {
            // تحديث الإحصائيات
            totalCertificates.textContent = `${certificatesData.length}/${statsData.maxCertificates}`;
            certificatesCount.textContent = `${certificatesData.length}/${statsData.maxCertificates}`;
            
            // عرض أحدث الشهادات في لوحة التحكم
            displayRecentCertificates();
            
            // عرض جميع الشهادات في صفحة الشهادات
            displayAllCertificates();
            
            // عرض الشهادات في البروفايل
            displayProfileCertificates();
        }

        // عرض أحدث الشهادات في لوحة التحكم
        function displayRecentCertificates() {
            recentCertificates.innerHTML = '';
            
            // أخذ أول 3 شهادات فقط
            const recent = certificatesData.slice(0, 3);
            
            recent.forEach(certificate => {
                const certificateElement = createCertificateElement(certificate, true);
                recentCertificates.appendChild(certificateElement);
            });
        }

        // عرض جميع الشهادات في صفحة الشهادات
        function displayAllCertificates() {
            certificatesList.innerHTML = '';
            
            let filteredCertificates = certificatesData;
            
            if (currentFilter !== 'all') {
                filteredCertificates = certificatesData.filter(cert => cert.type === currentFilter);
            }
            
            filteredCertificates.forEach(certificate => {
                const certificateElement = createCertificateCard(certificate);
                certificatesList.appendChild(certificateElement);
            });
        }

        // عرض الشهادات في البروفايل
        function displayProfileCertificates() {
            profileCertificates.innerHTML = '';
            
            certificatesData.forEach(certificate => {
                const certificateElement = createProfileCertificateElement(certificate);
                profileCertificates.appendChild(certificateElement);
            });
        }

        // إنشاء عنصر شهادة للعرض في القوائم
        function createCertificateElement(certificate, isRecent) {
            const div = document.createElement('div');
            div.className = `flex items-center space-x-4 space-x-reverse p-4 rounded-2xl hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition border border-gray-200/30 dark:border-gray-700/30 hover-lift ${isRecent ? '' : 'hidden'} ${certificate.type}-item`;
            
            const typeClass = `type-${certificate.type} type-badge`;
            const typeText = certificate.type === 'certificate' ? 'شهادة' : 
                            certificate.type === 'experience' ? 'خبرة' : 'مشروع';
            
            div.innerHTML = `
                <div class="w-14 h-14 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                    <i class="fas fa-certificate text-white"></i>
                </div>
                <div class="flex-1">
                    <h3 class="font-semibold text-gray-800 dark:text-white">${certificate.title}</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">${certificate.issuer} - ${formatDate(certificate.date)}</p>
                    <div class="flex flex-wrap gap-1 mt-2">
                        <span class="${typeClass}">${typeText}</span>
                    </div>
                </div>
                ${certificate.verifyUrl ? `
                <a href="${certificate.verifyUrl}" target="_blank" class="text-primary hover:text-primary-dark">
                    <i class="fas fa-external-link-alt"></i>
                </a>
                ` : ''}
            `;
            
            return div;
        }

        // إنشاء بطاقة شهادة للعرض في صفحة الشهادات
        function createCertificateCard(certificate) {
            const div = document.createElement('div');
            div.className = 'card-glass rounded-2xl shadow-glow p-6 theme-transition hover-lift';
            
            const typeClass = `type-${certificate.type} type-badge`;
            const typeText = certificate.type === 'certificate' ? 'شهادة' : 
                            certificate.type === 'experience' ? 'خبرة' : 'مشروع';
            
            div.innerHTML = `
                <div class="flex justify-between items-start mb-4">
                    <div class="w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                        <i class="fas fa-certificate text-white text-xl"></i>
                    </div>
                    <span class="${typeClass}">${typeText}</span>
                </div>
                
                <h3 class="text-lg font-bold text-gray-800 dark:text-white mb-2">${certificate.title}</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">${certificate.issuer} - ${formatDate(certificate.date)}</p>
                
                <p class="text-gray-700 dark:text-gray-300 text-sm mb-4">${certificate.description}</p>
                
                <div class="flex flex-wrap gap-2 mb-4">
                    ${certificate.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                </div>
                
                <div class="flex justify-between items-center pt-4 border-t border-gray-200/30 dark:border-gray-700/30">
                    <div class="flex space-x-2 space-x-reverse">
                        <button class="edit-certificate-btn edit-btn action-btn" data-id="${certificate.id}">
                            <i class="fas fa-edit mr-1"></i>
                            <span>تعديل</span>
                        </button>
                        <button class="delete-certificate-btn delete-btn action-btn" data-id="${certificate.id}">
                            <i class="fas fa-trash mr-1"></i>
                            <span>حذف</span>
                        </button>
                    </div>
                    
                    ${certificate.verifyUrl ? `
                    <a href="${certificate.verifyUrl}" target="_blank" class="text-primary hover:text-primary-dark text-sm">
                        <i class="fas fa-external-link-alt mr-1"></i>
                        <span>تحقق</span>
                    </a>
                    ` : ''}
                </div>
            `;
            
            // إضافة مستمعي الأحداث لأزرار التعديل والحذف
            const editBtn = div.querySelector('.edit-certificate-btn');
            const deleteBtn = div.querySelector('.delete-certificate-btn');
            
            editBtn.addEventListener('click', function() {
                editCertificate(certificate.id);
            });
            
            deleteBtn.addEventListener('click', function() {
                deleteCertificate(certificate.id);
            });
            
            return div;
        }

        // إنشاء عنصر شهادة للعرض في البروفايل
        function createProfileCertificateElement(certificate) {
            const div = document.createElement('div');
            div.className = 'flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6 md:space-x-reverse p-4 rounded-2xl hover:bg-gray-100/30 dark:hover:bg-gray-700/30 theme-transition border border-gray-200/30 dark:border-gray-700/30';
            
            const typeClass = `type-${certificate.type} type-badge`;
            const typeText = certificate.type === 'certificate' ? 'شهادة' : 
                            certificate.type === 'experience' ? 'خبرة' : 'مشروع';
            
            div.innerHTML = `
                <div class="flex-shrink-0">
                    <div class="w-20 h-20 bg-gradient-primary rounded-2xl flex items-center justify-center shadow-glow-primary">
                        <i class="fas fa-certificate text-white text-2xl"></i>
                    </div>
                </div>
                <div class="flex-1">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">${certificate.title}</h3>
                        <span class="${typeClass} mt-2 md:mt-0">${typeText}</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 mt-1">${certificate.issuer} - ${formatDate(certificate.date)}</p>
                    <p class="text-gray-700 dark:text-gray-300 mt-2">${certificate.description}</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        ${certificate.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                </div>
                <div class="flex-shrink-0 flex space-x-2 space-x-reverse">
                    <button class="edit-certificate-btn edit-btn action-btn" data-id="${certificate.id}">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="delete-certificate-btn delete-btn action-btn" data-id="${certificate.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                    ${certificate.verifyUrl ? `
                    <a href="${certificate.verifyUrl}" target="_blank" class="bg-gradient-primary text-white hover:shadow-glow-primary px-3 py-2 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 space-x-reverse font-medium text-sm">
                        <i class="fas fa-external-link-alt"></i>
                    </a>
                    ` : ''}
                </div>
            `;
            
            // إضافة مستمعي الأحداث لأزرار التعديل والحذف
            const editBtn = div.querySelector('.edit-certificate-btn');
            const deleteBtn = div.querySelector('.delete-certificate-btn');
            
            editBtn.addEventListener('click', function() {
                editCertificate(certificate.id);
            });
            
            deleteBtn.addEventListener('click', function() {
                deleteCertificate(certificate.id);
            });
            
            return div;
        }

        // تنسيق التاريخ
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const date = new Date(dateString);
            return date.toLocaleDateString('ar-EG', options);
        }

        // تبديل الصفحات
        function showDashboard() {
            hideAllContent();
            dashboardContent.classList.remove('hidden');
            pageTitle.querySelector('.ar-text').textContent = 'لوحة التحكم';
            pageTitle.querySelector('.en-text').textContent = 'Dashboard';
            breadcrumb.querySelector('.ar-text').textContent = 'الرئيسية';
            breadcrumb.querySelector('.en-text').textContent = 'Home';
            updateActiveSidebarItem(dashboardLink);
        }

        function showAddCertificate() {
            hideAllContent();
            addCertificateContent.classList.remove('hidden');
            pageTitle.querySelector('.ar-text').textContent = 'إضافة شهادة جديدة';
            pageTitle.querySelector('.en-text').textContent = 'Add New Certificate';
            breadcrumb.querySelector('.ar-text').textContent = 'إضافة شهادة';
            breadcrumb.querySelector('.en-text').textContent = 'Add Certificate';
            updateActiveSidebarItem(addCertificateLink);
            
            // إعادة تعيين النموذج إذا كان في وضع الإضافة
            if (!editingCertificateId) {
                resetCertificateForm();
            }
        }

        function showCertificates() {
            hideAllContent();
            certificatesContent.classList.remove('hidden');
            pageTitle.querySelector('.ar-text').textContent = 'شهاداتي ومشاريعي';
            pageTitle.querySelector('.en-text').textContent = 'My Certificates & Projects';
            breadcrumb.querySelector('.ar-text').textContent = 'الشهادات';
            breadcrumb.querySelector('.en-text').textContent = 'Certificates';
            updateActiveSidebarItem(certificatesLink);
        }

        function showProfile() {
            hideAllContent();
            profileContent.classList.remove('hidden');
            pageTitle.querySelector('.ar-text').textContent = 'البروفايل الشخصي';
            pageTitle.querySelector('.en-text').textContent = 'Personal Profile';
            breadcrumb.querySelector('.ar-text').textContent = 'البروفايل';
            breadcrumb.querySelector('.en-text').textContent = 'Profile';
            updateActiveSidebarItem(profileLink);
        }

        function hideAllContent() {
            dashboardContent.classList.add('hidden');
            addCertificateContent.classList.add('hidden');
            certificatesContent.classList.add('hidden');
            profileContent.classList.add('hidden');
        }

        function updateActiveSidebarItem(activeItem) {
            document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
            activeItem.classList.add('active');
        }

        // إعادة تعيين نموذج الشهادة
        function resetCertificateForm() {
            addCertificateForm.reset();
            currentSkills = [];
            updateSkillsDisplay();
            imagePreview.classList.add('hidden');
            editingCertificateId = null;
            
            // تغيير نص زر الحفظ
            const submitBtn = addCertificateForm.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-save"></i><span class="ar-text">حفظ الشهادة</span><span class="en-text hidden">Save Certificate</span>';
        }

        // إضافة مهارة إلى النموذج
        function addSkill() {
            const skill = skillInput.value.trim();
            if (skill && !currentSkills.includes(skill)) {
                currentSkills.push(skill);
                updateSkillsDisplay();
                skillInput.value = '';
            }
        }

        // تحديث عرض المهارات في النموذج
        function updateSkillsDisplay() {
            skillsContainer.innerHTML = '';
            currentSkills.forEach(skill => {
                const skillElement = document.createElement('div');
                skillElement.className = 'skill-tag flex items-center';
                skillElement.innerHTML = `
                    ${skill}
                    <button type="button" class="mr-1 text-red-500 hover:text-red-700 remove-skill" data-skill="${skill}">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                `;
                skillsContainer.appendChild(skillElement);
            });
            
            // إضافة مستمعي الأحداث لأزرار الحذف
            document.querySelectorAll('.remove-skill').forEach(button => {
                button.addEventListener('click', function() {
                    const skillToRemove = this.getAttribute('data-skill');
                    currentSkills = currentSkills.filter(skill => skill !== skillToRemove);
                    updateSkillsDisplay();
                });
            });
        }

        // معالجة رفع الصورة
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    imagePreview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        // حفظ الشهادة في Supabase
        async function saveCertificateToSupabase(certificateData) {
            try {
                // محاكاة لحفظ البيانات في Supabase
                console.log('Certificate saved to Supabase:', certificateData);
                
                if (editingCertificateId) {
                    // تحديث الشهادة الموجودة
                    const index = certificatesData.findIndex(cert => cert.id === editingCertificateId);
                    if (index !== -1) {
                        certificatesData[index] = { ...certificatesData[index], ...certificateData };
                    }
                } else {
                    // إضافة شهادة جديدة
                    certificateData.id = certificatesData.length + 1;
                    certificatesData.unshift(certificateData);
                }
                
                // تحديث العرض
                loadCertificates();
                
                // عرض رسالة نجاح
                alert(editingCertificateId ? 'تم تحديث الشهادة بنجاح!' : 'تم حفظ الشهادة بنجاح!');
                
                // العودة إلى لوحة التحكم
                showDashboard();
                
            } catch (error) {
                console.error('Error saving certificate to Supabase:', error);
                alert('حدث خطأ أثناء حفظ الشهادة. يرجى المحاولة مرة أخرى.');
            }
        }

        // معالجة إرسال نموذج الشهادة
        function handleCertificateSubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const certificateData = {
                title: document.getElementById('certificate-name').value,
                type: document.getElementById('certificate-type').value,
                date: document.getElementById('certificate-date').value,
                verifyUrl: document.getElementById('certificate-url').value,
                skills: currentSkills,
                description: document.getElementById('certificate-description').value,
                issuer: "مستخدم" // يمكن جعله حقل في النموذج لاحقاً
            };
            
            // حفظ الشهادة
            saveCertificateToSupabase(certificateData);
            
            // إعادة تعيين النموذج
            resetCertificateForm();
        }

        // تعديل شهادة
        function editCertificate(id) {
            const certificate = certificatesData.find(cert => cert.id === id);
            if (certificate) {
                editingCertificateId = id;
                
                // تعبئة النموذج ببيانات الشهادة
                document.getElementById('certificate-name').value = certificate.title;
                document.getElementById('certificate-type').value = certificate.type;
                document.getElementById('certificate-date').value = certificate.date;
                document.getElementById('certificate-url').value = certificate.verifyUrl || '';
                document.getElementById('certificate-description').value = certificate.description;
                
                // تعبئة المهارات
                currentSkills = [...certificate.skills];
                updateSkillsDisplay();
                
                // تغيير نص زر الحفظ
                const submitBtn = addCertificateForm.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<i class="fas fa-save"></i><span class="ar-text">تحديث الشهادة</span><span class="en-text hidden">Update Certificate</span>';
                
                // الانتقال إلى صفحة إضافة الشهادة
                showAddCertificate();
            }
        }

        // حذف شهادة
        function deleteCertificate(id) {
            if (confirm('هل أنت متأكد من حذف هذه الشهادة؟')) {
                certificatesData = certificatesData.filter(cert => cert.id !== id);
                loadCertificates();
                alert('تم حذف الشهادة بنجاح!');
            }
        }

        // تصفية الشهادات حسب النوع
        function filterCertificates(filter) {
            currentFilter = filter;
            
            // تحديث أزرار التصفية
            filterBtns.forEach(btn => {
                if (btn.getAttribute('data-filter') === filter) {
                    btn.classList.add('active', 'bg-gradient-primary', 'text-white', 'shadow-glow-primary');
                    btn.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
                } else {
                    btn.classList.remove('active', 'bg-gradient-primary', 'text-white', 'shadow-glow-primary');
                    btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
                }
            });
            
            // عرض الشهادات المصفاة
            displayAllCertificates();
        }

        // نسخ رابط المشاركة
        function copyProfileUrlToClipboard() {
            const urlInput = document.getElementById('profile-share-url');
            urlInput.select();
            document.execCommand('copy');
            
            // تغيير أيقونة الزر مؤقتاً للإشارة إلى النسخ
            const icon = copyProfileUrl.querySelector('i');
            icon.className = 'fas fa-check';
            setTimeout(() => {
                icon.className = 'fas fa-copy';
            }, 2000);
        }

        // تبديل الوضع الداكن
        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            
            // تحديث الأيقونة
            const icons = document.querySelectorAll('#theme-toggle-sidebar i');
            icons.forEach(icon => {
                icon.className = isDark ? 'fas fa-sun text-white text-sm' : 'fas fa-moon text-white text-sm';
            });
            
            // حفظ التفضيلات
            localStorage.setItem('darkMode', isDark);
        }

        // إظهار/إخفاء الشريط الجانبي على الجوال
        function toggleMobileSidebar() {
            sidebar.style.transform = 'translateX(0)';
        }

        // إغلاق الشريط الجانبي على الجوال
        function closeMobileSidebar() {
            sidebar.style.transform = 'translateX(-100%)';
        }

        // إظهار نافذة مشاركة البروفايل
        function showShareProfile() {
            shareProfileModal.classList.remove('hidden');
        }

        // إخفاء نافذة مشاركة البروفايل
        function hideShareProfile() {
            shareProfileModal.classList.add('hidden');
        }

        // أحداث DOM
        document.addEventListener('DOMContentLoaded', function() {
            // تحميل التفضيلات والبيانات
            loadPreferencesFromSupabase();
            loadUserData();
            loadCertificates();
            
            // إضافة مستمعي الأحداث
            themeToggleSidebar.addEventListener('click', toggleDarkMode);
            mobileMenuBtn.addEventListener('click', toggleMobileSidebar);
            closeSidebarBtn.addEventListener('click', closeMobileSidebar);
            
            // التنقل بين الصفحات
            dashboardLink.addEventListener('click', function(e) {
                e.preventDefault();
                showDashboard();
            });
            
            addCertificateLink.addEventListener('click', function(e) {
                e.preventDefault();
                showAddCertificate();
            });
            
            certificatesLink.addEventListener('click', function(e) {
                e.preventDefault();
                showCertificates();
            });
            
            profileLink.addEventListener('click', function(e) {
                e.preventDefault();
                showProfile();
            });
            
            addCertificateAction.addEventListener('click', function(e) {
                e.preventDefault();
                showAddCertificate();
            });
            
            certificatesAction.addEventListener('click', function(e) {
                e.preventDefault();
                showCertificates();
            });
            
            profileAction.addEventListener('click', function(e) {
                e.preventDefault();
                showProfile();
            });
            
            // أحداث النموذج
            addCertificateForm.addEventListener('submit', handleCertificateSubmit);
            certificateImage.addEventListener('change', handleImageUpload);
            addSkillBtn.addEventListener('click', addSkill);
            skillInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addSkill();
                }
            });
            
            // أحداث التصفية
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    filterCertificates(filter);
                });
            });
            
            // أحداث المشاركة
            shareProfileBtn.addEventListener('click', showShareProfile);
            closeShareProfile.addEventListener('click', hideShareProfile);
            copyProfileUrl.addEventListener('click', copyProfileUrlToClipboard);
            
            // إغلاق القوائم المنسدلة عند النقر خارجها
            document.addEventListener('click', function(e) {
                if (!shareProfileBtn.contains(e.target) && !shareProfileModal.contains(e.target)) {
                    shareProfileModal.classList.add('hidden');
                }
                
                // إغلاق الشريط الجانبي على الجوال عند النقر خارجها
                if (window.innerWidth < 1024 && !sidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    closeMobileSidebar();
                }
            });
            
            // إغلاق الشريط الجانبي على الجوال عند تغيير حجم النافذة
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 1024) {
                    sidebar.style.transform = 'translateX(0)';
                } else {
                    closeMobileSidebar();
                }
            });
        });
    </script>
</body>
</html>
